<div class="loader" *ngIf="loader">
  <span></span>
  <span></span>
  <span></span>
  <span></span>
</div>
<div class="project_bord">
    <div class="row">
        <div class="col-md-3 margin-tb-20" *ngFor="let project of projects" >
            <div class="card card-cascade narrower">
              <div class="view view-cascade overlay" style="background-color: #ddd">
                <img  routerLink="/project-details/{{project._id}}" class="img-fluid title_image margin-auto width-80" src="{{path}}{{project.avatar}}" alt="Card image cap" onerror="this.src='assets/4.jpeg'">
                <div class="margin-top-10 margin-bottom-10 text-center">
                    <h4  routerLink="/project-details/{{project._id}}" class="font-weight-bold card-title">{{project.title}}</h4>

                </div>
                <div class="row text-center margin-20">
                    <div class="col-md-4 indigo-text">
                     <strong title="task" class="text-center">
                        <i class="fas font-project-view-small fa-tasks fa-fw"></i>
                        <span class="badge badge-pill z-depth-0 badge-dark">{{getLength(project, 'TASK')}}</span>
                    </strong>
                </div>
                <div class="col-md-4 pink-text">
                    <strong title="Issue" class="text-center" > 
                        <i class="fas font-project-view-small fa-exclamation-triangle fa-fw"></i>
                        <span class="badge badge-pill z-depth-0 badge-dark">{{getLength(project, 'ISSUE')}}</span>
                    </strong>
                </div>
                <div class="col-md-4 red-text">
                 <strong title="Bug" class=" text-center">
                    <i class="fas font-project-view-small fa-bug fa-fw"></i>
                    <span class="badge badge-pill z-depth-0 badge-dark">{{getLength(project, 'BUG')}}</span>
                </strong>
            </div>
        </div>
    </div>
    <div class="btn-group dropleft float-right">
      <button type="button" style="border-radius: 50%;" class="btn btn-default btn-floating btn_popover_menu padding-0" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false"><i class="fas fa-ellipsis-v"></i> 
      </button>
      <div class="dropdown-menu">
        <a class="dropdown-item btn-floating  mt-0 mx-1" title="Edit Project" routerLink="/edit-project/{{project._id}}"><i class="far fa-edit padding-top-1"></i></a>
        <a class="dropdown-item btn-floating btn-tw mt-0 mx-1" [title]="project.Teams.length + ' Team-Members'"><i class="fas fa-users"></i></a>
        <a class="dropdown-item btn-floating btn-gplus mt-0 mx-1" title="Project Summary" routerLink="/summary/{{project._id}}"><i class="fa fa-bar-chart" aria-hidden="true"></i></a>
        <a class="dropdown-item btn-floating btn-gplus mt-0 mx-1" title="Project backlog" routerLink="/backlog/{{project._id}}"><i class="fas fa-running"></i></a>
    </div>
</div>
<div class="card-body card-body-cascade margin-bottom-0 text-center">
    <h5 class="deep-purple-text">
        <i class="fab fa-react">{{getTechName('fa-react')}}</i>
    </h5>
    <ul *ngFor ="let proj of project.pmanagerId"> 
        <li class="font-weight-bold">
            {{proj.name}}
        </li></ul>
        <p><i class="far fa-calendar-plus margin-right-5"></i> <span>{{getDate(project.createdAt)}}</span></p>
        <p class="card-text">{{project.desc}}</p>
        <button class="btn btn-default progress_summary" (mouseover)="mouseOver(project)">Progress</button>
        <div class="summary card z-depth-3" *ngIf="hoveredProject">
            <h4>{{hoveredProject.title}}</h4>
            <h4 class="margin-top-10">Project Progress</h4>
            <div class="row padding-20">
                <div class="col-md-6">
                    <button class="btn btn-warning">{{getTaskCount('to do')}}</button>
                    <p>To Do</p>
                    <!-- <p>{{getTaskCount('to do')}}</p> -->
                </div>
                <div class="col-md-6">
                    <button class="btn btn-info">{{getTaskCount('in progress')}}</button>
                    <p>In Progress</p>
                    <!-- <p>{{getTaskCount('in progress')}}</p> -->
                </div>
                <div class="col-md-6">
                    <button class="btn btn-indigo">{{getTaskCount('testing')}}</button>
                    <p>Testing</p>
                    <!-- <p>{{getTaskCount('testing')}}</p> -->
                </div>
                <div class="col-md-6">
                    <button class="btn btn-success">{{getTaskCount('comlete')}}</button>
                    <p>Complete</p>
                    <!-- <p>{{getTaskCount('comlete')}}</p> -->
                </div>
            </div>
        </div>
    </div>

</div>
</div>
</div>

<!-- modal start -->
<div class="modal fade" id="createProject" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="card card-cascade narrower">
                    <div class="view view-cascade gradient-card-header " style="background-color: #372e5f">
                        <h2 class="card-header-title white-text text-center py-3" align="center">Create Project</h2>
                    </div>
                    <div class="card-body card-body-cascade text-center" style="padding-top: 35px;">
                        <div class="container">
                            <div class="card-body px-lg-5 pt-1">
                                <form class="md-form" [formGroup]='addForm' style="color: #757575;">
                                    <div class="md-form form-group">
                                        <label for="projecttitle">Project Title</label>
                                        <input type="text" id="projecttitle"  formControlName="title" class="form-control">
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="projectalias">Project Alias</label>
                                        <input type="text" id="projectalias"  formControlName="uniqueId" class="form-control">
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="desc">Description</label>
                                        <textarea id="desc" rows="5" formControlName="desc" class="form-control rounded-0 md-textarea"></textarea>
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="date-picker-example">Deadline</label>
                                        <input type="text" id="date-picker" 
                                        formControlName="deadline"  class="form-control datepicker" >
                                    </div>
                                    <div>
                                        <h4><strong>Client Details :-</strong></h4>
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="clientemail">Email</label>
                                        <input type="email" id="clientemail" formControlName="clientEmail" class="form-control">
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="clientfullname">Full Name</label>
                                        <input type="text" id="clientfullname" formControlName="clientFullName" class="form-control">
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="md-form form-group">
                                                <label for="clientcontactno">Contact No.</label>
                                                <input type="number" id="clientcontactno" formControlName="clientContactNo" class="form-control">
                                            </div>  
                                        </div>
                                        <div class="col-md-6">
                                            <div class="md-form form-group">
                                                <label for="clientdesignation">Designation</label>
                                                <input type="text" id="clientdesignation" formControlName="clientDesignation" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center selected-avatar" *ngIf="url">
                                        <img class="avatar-image margin-auto" [src]="url" style="height: 150px; width: 150px;">
                                        <div class="delete-team-member">
                                            <a href="javascript:void(0);" (click)="removeAvatar()"><i class="fas fa-trash fa-2x"></i></a>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-default" data-toggle="modal" data-target="#basicExampleModal">
                                        Select Project avatar
                                    </button>
                                    <button type="submit" class="btn btn-default btn-rounded z-depth-1" (click)="addProject(addForm.value)">Create Project</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="basicExampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Choose Avatar</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="md-form form-group">
                <div class="file-field">
                    <div class="btn btn-default btn-sm float-left">
                        <span>Upload a new avatar</span>
                        <input type="file" name="fileUpload" (change)="onSelectFile($event)">
                    </div>
                    <div class="file-path-wrapper">
                        <input  class="file-path validate" type="text" placeholder="Upload your file">
                    </div>
                </div>
                <ul class="project-avatar">
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/school.png')">
                            <img src="../assets/avatar/school.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/mortarboard.png')">
                            <img src="assets/avatar/mortarboard.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/alarm-clock.png')">
                            <img src="assets/avatar/alarm-clock.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button"  (click)="addIcon('/uploads/avatar/stethoscope.png')">
                            <img src="assets/avatar/stethoscope.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/doctor.png')">
                            <img src="assets/avatar/doctor.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/bookshelf.png')">
                            <img src="assets/avatar/bookshelf.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/flask.png')">
                            <img src="assets/avatar/flask.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/customer-service.png')">
                            <img src="assets/avatar/customer-service.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/payment-method.png')">
                            <img src="assets/avatar/payment-method.png" height="56" width="56">
                        </button>   
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/beach.png')">
                            <img src="assets/avatar/beach.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/coding.png')">
                            <img src="assets/avatar/coding.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/maintenance.png')">
                            <img src="assets/avatar/maintenance.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/birthday-cake.png')">
                            <img src="assets/avatar/birthday-cake.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/conversation.png')">
                            <img src="assets/avatar/conversation.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/food.png')">
                            <img src="assets/avatar/food.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/shopping-basket.png')">
                            <img src="assets/avatar/shopping-basket.png" height="56" width="56">
                        </button>
                    </li>

                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="loader" *ngIf="loader">
  <span></span>
  <span></span>
  <span></span>
  <span></span>
</div>
<div class="project_bord" *ngIf="!loader">
    <div class="row">
        <div class="col-12 col-md-3 col-lg-4 col-sm-6    margin-bottom-30" *ngFor="let project of projects">
            <div class="card testimonial-card z-depth-5">
              <!-- Background image -->
              <div class="card-up" style="background-image: url('assets/pmtUp.jpg'); background-size:cover; height: 150px; background-position: center center;">
                  <div style="top:0; left:0; right:0;bottom:0; background-color: rgba(250, 250, 250,0.7); height: 150px;">
                    <!-- Project Name -->
                    <div class="card-title " routerLink="/project-details/{{project._id}}">
                        <h4 style="color:#6027E2;" class="font-robo-condensed project_title">{{project.title}}</h4>
                    </div>      
                </div>
            </div>
            <a class="btn-floating btn-action padding-5 mdb-color dark-3"><i class="fas fa-chevron-right pr-10" title="edit-project" routerLink="/edit-project/{{project._id}}"></i></a>

            <!-- Avatar -->
            <div class="avatar">
                <img src="{{path}}{{project.avatar}}" class="avatar_image z-depth-5" onerror="this.src='assets/4.jpeg'" >
            </div>

            <!-- Content -->
            <div class="card-body text-center">

                <div class="rounded-bottom hover purple-gradient-2 text-center text-white">
                    <div class="row padding-15 bottom-0">
                        <div class="col-md-3 col-sm-3 col-lg-3 text-center">
                            <strong title="task" class="text-center">
                                <!-- <img src="assets/icons/task.png" class="tib-prefix"> -->
                                <!-- <span class="tib-view-projects-description">{{(project.taskId.length>0)?project.taskId.length:0}}</span> -->
                                <!-- <i class="fas fa-exclamation-triangle fa-fw"></i> -->
                                <i class="fas font-project-view-small fa-tasks fa-fw"></i>                        
                                <span class="badge badge-pill z-depth-0 badge-dark">{{getLength(project, 'TASK')}}</span>

                            </strong>
                        </div>
                        <div class="col-md-3 col-sm-3  text-center border-left">
                         <strong title="Issue" class="text-center" > 
                            <!-- <img src="assets/icons/issues.png" class="tib-prefix"> -->
                            <i class="fas font-project-view-small fa-exclamation-triangle fa-fw"></i>
                            
                            <span class="badge badge-pill z-depth-0 badge-dark">{{getLength(project, 'ISSUE')}}</span>
                            

                        </strong>
                    </div>
                    <div class="col-md-3 col-sm-3  text-center border-left">
                        <strong title="Bug" class=" text-center">
                            <!-- <img src="assets/icons/bug-2.png" class="tib-prefix"> -->
                            <i class="fas font-project-view-small fa-bug fa-fw"></i>
                            <span class="badge badge-pill z-depth-0 badge-dark">{{getLength(project, 'BUG')}}</span>

                            <!-- <span class="tib-view-projects-description"></span> -->
                        </strong>
                    </div>  
                    <div class="col-md-3 col-sm-3  text-center border-left">
                        <strong title="Summary" class=" text-center">
                            <!-- <img src="assets/icons/bug-2.png" class="tib-prefix"> -->
                            
                            <span routerLink="/summary/{{project._id}}"><i class="fas font-project-view-small fa-exclamation-triangle fa-fw"></i></span>

                            <!-- <span class="tib-view-projects-description"></span> -->
                        </strong>
                    </div>  
                </div>
            </div>

        </div>
        <!-- Card -->
           <!--  <div class="card">
                <div class="card-header bg-info white-text" routerLink="/project-details/{{project._id}}">
                    <h4 class="project-title-view-project">{{project.title}}</h4>
                    <div class="avatar">
                        <img src="{{path}}{{project.avatar}}" class="avatar_image" onerror="this.src='assets/4.jpeg'" >
                    </div>
                    <div class="float-right">
                        <span routerLink="/project/files-list/{{project._id}}"><i class="fa fa-file pl-2"></i></span>
                        <span><i class="fa fa-star pl-2"></i></span>
                        <span routerLink="/edit-project/{{project._id}}"><i class="fa fa-edit pl-2"></i></span>

                        <span routerLink="/summary/{{project._id}}"><i class="fas fa-info-circle pl-2" title="summary"></i></span>
                    </div>
                </div>
                <div class="card-body" routerLink="/project-details/{{project._id}}" >
                    <div class="row border-bottom">
                        <div class="col-xs-12 padding-5">
                            <p class="card-text font-monospace">{{project.desc}}</p>
                        </div>
                    </div>
                    <div class="row border text-center margin-20 padding-10">
                        <div class="col-md-6 ">
                           <span>team </span>
                        </div>
                        <div class="col-md-6 border-left">
                            developer
                        </div>
                    </div>
                    <div class="row border-top pb-1 mb-0">
                        <div class="col-md-4 text-center">
                            <strong title="task" class="blue-text">
                                <img src="assets/icons/task.png" class="tib-prefix">
                            </strong>
                            <span class="tib-view-projects-description">{{(project.taskId.length>0)?project.taskId.length:0}}</span>
                        </div>
                        <div class="col-md-4 text-center border-left">
                         <strong title="Issue" >
                            <img src="assets/icons/issues.png" class="tib-prefix">
                        </strong>
                        <span class="tib-view-projects-description">{{(project.IssueId.length>0)?project.IssueId.length:0}}</span>
                    </div>
                    <div class="col-md-4 text-center border-left">
                        <strong title="Bug" class="red-text">
                            <img src="assets/icons/bug-2.png" class="tib-prefix">
                        </strong>
                        <span class="tib-view-projects-description">{{(project.BugId.length>0)?project.BugId.length:0}}</span>
                    </div>  
                </div>
            </div>
        </div> -->
        <!--     <div class="card-action padding-10"> -->
          <!--<div class="card-text float-left"><strong title="task">T:</strong>{{(project.taskId.length>0)?project.taskId.length:0}},<strong title="Issue">I:</strong>{{(project.IssueId.length>0)?project.IssueId.length:0}},<strong title="Bug">B:</strong>{{(project.BugId.length>0)?project.BugId.length:0}}</div> -->
           <!-- <div class="float-right">
            <ul class="team-members">
                <span *ngIf="project.Teams.length>0">
                    <li *ngFor="let Team of project.Teams" [title]="getTitle(Team.name)">
                       
                           <a [routerLink]="['/userprofile/']">
                                {{getInitialsOfName(Team.name)}}
                            </a>
                        </li>
                    </span>
                    <li class="add-member">
                        <a title="Add Member" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" *ngIf="currentUser.userRole=='projectManager'">
                            <i class="fa fa-user-plus"></i>
                        </a>
                        <a title="Add Member" *ngIf="currentUser.userRole!='projectManager'">
                            <i class="fa fa-user-plus"></i>
                        </a>
                        <div class="dropdown-menu">
                            <p class="dropdown-item">Action</p>
                            <p class="dropdown-item">Another action</p>
                            <p class="dropdown-item">Something else here</p>
                            <div class="dropdown-divider"></div>
                            <p class="dropdown-item">Add</p>
                        </div>
                    </li>
                </ul>
            </div>  -->
            <!--  </div> -->
        </div> 
        <!-- <div class="col-12 col-md-3 margin-bottom-30" *ngIf="currentUser.userRole=='projectManager'">
            <div class="card">
                <div class="card-body">
                    <a href="javascript:void(0);" title="Add Project" data-toggle="modal" data-target="#createProject">
                        <i class="fa fa-plus fa-5x"></i>
                    </a>
                </div>
            </div>
        </div> -->
    </div>
    <div *ngIf="currentUser.userRole=='projectManager'">
       <div class="fixed-action-btn">
        <a href="javascript:void(0);" title="Add Project" data-toggle="modal" data-target="#createProject" class="btn-floating btn-large" ripple-radius (click)="fixed.toggle()">
            <i class="fa fa-plus"></i>
        </a>
    </div>
</div>
</div>
</div>
<div class="modal fade" id="createProject" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="card card-cascade narrower">
                    <!-- Card image -->
                    <div class="view view-cascade gradient-card-header " style="background-color: #372e5f">
                        <!-- Title -->
                        <h2 class="card-header-title white-text text-center py-3" align="center">Create Project</h2>
                    </div>
                    <!-- Card content -->
                    <div class="card-body card-body-cascade text-center" style="padding-top: 35px;">
                        <!-- Text -->
                        <div class="container">

                            <div class="card-body px-lg-5 pt-1">
                                <form class="md-form" [formGroup]='addForm' style="color: #757575;">
                                    <div class="md-form form-group">
                                        <label for="projecttitle">Project Title</label>
                                        <input type="text" id="projecttitle"  formControlName="title" class="form-control">
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="projectalias">Project Alias</label>
                                        <input type="text" id="projectalias"  formControlName="uniqueId" class="form-control">
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="desc">Description</label>
                                        <textarea id="desc" rows="5" formControlName="desc" class="form-control rounded-0 md-textarea"></textarea>
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="date-picker-example">Deadline</label>
                                        <input type="text" id="date-picker" 
                                        formControlName="deadline"  class="form-control datepicker" >
                                    </div>
                                    <div>
                                        <h4><strong>Client Details :-</strong></h4>
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="clientemail">Email</label>
                                        <input type="email" id="clientemail" formControlName="clientEmail" class="form-control">
                                    </div>
                                    <div class="md-form form-group">
                                        <label for="clientfullname">Full Name</label>
                                        <input type="text" id="clientfullname" formControlName="clientFullName" class="form-control">
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="md-form form-group">
                                                <label for="clientcontactno">Contact No.</label>
                                                <input type="number" id="clientcontactno" formControlName="clientContactNo" class="form-control">
                                            </div>  
                                        </div>
                                        <div class="col-md-6">
                                            <div class="md-form form-group">
                                                <label for="clientdesignation">Designation</label>
                                                <input type="text" id="clientdesignation" formControlName="clientDesignation" class="form-control">
                                            </div>
                                        </div>
                                    </div>

                                   <!--  <div class="form-group">
                                        <ng-select placeholder="Select Developers" [items]="developers" [multiple]="true" bindLabel="name" [(ngModel)]="objectsArray" [closeOnSelect]="false" formControlName="Teams">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                <span class="ng-value-label"><img [src]="item.profilePhoto" onerror="this.src='assets/icons/avatar.png'" width="20px" height="20px"> {{item.name}}</span>
                                                <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                            </ng-template>
                                            <div class="row">
                                                <ng-template ng-option-tmp let-item="item">
                                                    <div class="card testimonial-card">
                                                        <div class="card-up deep-purple lighten-2"></div>
                                                        <div class="avatar white img_section">
                                                            <img src="{{baseUrl}}{{item.profilePhoto}}" onerror="this.src='assets/icons/avatar.png'" class="rounded-circle img-fluid" style="height: 100px;">
                                                        </div>
                                                        <div class="card-body">
                                                            <h5 class="card-title mt-1">{{item.name}}</h5>
                                                            <h6 class="card-title">{{item.userRole}}</h6>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </div>
                                        </ng-select>
                                    </div> -->


                                <!-- demo code -->
                                <img [src]="url" height="150" width="150"> <br/>
                                <!-- demo code -->
                                <button type="button" class="btn btn-default" data-toggle="modal" data-target="#basicExampleModal">
                                    Select Project avatar
                                </button>
                                <button type="submit" class="btn btn-default btn-rounded z-depth-1" (click)="addProject(addForm.value)">Create Project</button>
                            </form>
                        </div>
                            <!-- <div class="modal-footer">
                                <button type="submit" class="btn btn-default btn-rounded z-depth-1" (click)="addProject(addForm.value)" [disabled]="addForm.invalid">Create Project</button>
                                <button type="button" class="btn btn-default btn-rounded z-depth-1" data-dismiss="modal" aria-label="Close">Cancle</button>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Start Here -->

<div class="modal fade" id="basicExampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Choose Avatar</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="md-form form-group">
                <div class="file-field">
                    <div class="btn btn-default btn-sm float-left">
                        <span>Upload a new avatar</span>
                        <input type="file" name="fileUpload" (change)="onSelectFile($event)">
                    </div>
                    <div class="file-path-wrapper">
                        <input  class="file-path validate" type="text" placeholder="Upload your file">
                    </div>
                </div>
                <ul class="project-avatar">
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/school.png')">
                            <img src="../assets/avatar/school.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/mortarboard.png')">
                            <img src="assets/avatar/mortarboard.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/alarm-clock.png')">
                            <img src="assets/avatar/alarm-clock.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button"  (click)="addIcon('/uploads/avatar/stethoscope.png')">
                            <img src="assets/avatar/stethoscope.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/doctor.png')">
                            <img src="assets/avatar/doctor.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/bookshelf.png')">
                            <img src="assets/avatar/bookshelf.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/flask.png')">
                            <img src="assets/avatar/flask.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/customer-service.png')">
                            <img src="assets/avatar/customer-service.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/payment-method.png')">
                            <img src="assets/avatar/payment-method.png" height="56" width="56">
                        </button>   
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/beach.png')">
                            <img src="assets/avatar/beach.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/coding.png')">
                            <img src="assets/avatar/coding.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/maintenance.png')">
                            <img src="assets/avatar/maintenance.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/birthday-cake.png')">
                            <img src="assets/avatar/birthday-cake.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/conversation.png')">
                            <img src="assets/avatar/conversation.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/food.png')">
                            <img src="assets/avatar/food.png" height="56" width="56">
                        </button>
                    </li>
                    <li>
                        <button class="icon-button" (click)="addIcon('/uploads/avatar/shopping-basket.png')">
                            <img src="assets/avatar/shopping-basket.png" height="56" width="56">
                        </button>
                    </li>

                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal End Here -->


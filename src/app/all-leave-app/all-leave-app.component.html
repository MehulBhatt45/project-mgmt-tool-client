<ul class="nav nav-tabs nav-justified md-tabs deep-purple" id="myTabJust" role="tablist" *ngIf="currentUser.userRole=='admin' || currentUser.userRole=='projectManager'">
  <li class="nav-item">
    <!-- <img src="assets/icons/pending.png"> -->
    <a class="nav-link" (click)="leavesToDisplay=false; selectedStatus='pending'; getFilteredLeaves()">Pending Leaves</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" (click)="leavesToDisplay=false; selectedStatus='approved'; getFilteredLeaves()">Accepted Leaves</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" (click)="leavesToDisplay=false; selectedStatus='rejected'; getFilteredLeaves()">Rejected Leaves</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" (click)="leavesToDisplay=false">
      <div>
        <select class="browser-default custom-select custom-select-lg  text-left" *ngIf="developers && currentUser.userRole=='projectManager'" (change)="filterTracks(trackChangeDeveloperWise = $event.target.value)">
          <option value="all" selected>All Developer</option>
          <option *ngFor="let developer of developers" value="{{developer.email}}">{{developer.name}}</option>
        </select>
      </div>
    </a>
  </li>
</ul>



<div class="row justify-content-center" *ngIf="!leavesToDisplay">
  <div class="col-12 col-md-12">
    <div class="card card-cascade narrower" *ngIf="currentUser.userRole=='projectManager' || currentUser.userRole=='admin' ">
      <div class="view view-cascade purple-gradient-2 color-block narrower  d-flex justify-content-between align-items-center">
        <h2 class="white-text mx-3" style="text-align: center; margin: 0; padding: 10px 0; width: 100%;">Leave Applications</h2>
      </div>
      <div class="px-4" style="text-align: center;">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>
                  Avtar
                </th>
                <th>
                  <span>Name
                  </span>
                </th> 
                <th>
                  <span>Leave-Duration
                  </span>
                </th><!-- 
                <th>
                  <span>From Date
                  </span>
                </th>
                <th>
                  <span>To Date
                  </span>
                </th>
                <th>
                  <span>Types Of Leave</span>
                </th>
                <th>
                  <span>Leave-Reason</span>
                </th> -->
                <th>
                  <span>Attachment</span>
                </th>
                <th>
                  <span>Comment</span>
                </th>
                <th>
                  <span>ViewMore</span>
                </th>
                <th>
                  <span>Leave-Status</span>
                  <i class="fas fa-sort ml-1"></i>
                </th>
                <th id="statusAction">
                  <span>Action</span>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let leaves of leaveApp">
                <td style="width: 56px;">
                  <div class="avatar mx-auto" *ngIf= "leaves.dev">
                    <a routerLink = "/visit-user-profile/{{leaves.dev._id}}">
                      <img src="{{path}}{{leaves.dev.profilePhoto}}" onerror="this.src='../assets/man.png'" class="rounded-circle img-fluid img_content">
                    </a>
                  </div>
                </td>
                <td><strong>{{leaves.name}}</strong></td>
                <td >{{leaves.leaveDuration}}</td>
                <!-- <td>{{leaves.startingDate}}</td> -->
                <!-- <td>{{leaves.endingDate}}</td> -->
                <!-- <td>{{leaves.typeOfLeave}}</td> -->
                <!-- <td class="description">{{leaves.reasonForLeave}}</td> -->
                <td >
                  <span *ngIf="leaves.attechment && leaves.attechment.length">
                    <span *ngFor="let att of leaves.attechment">
                      <a *ngIf="!att.includes('.pdf')" data-lightbox="comment_image" class="image_attachment" href="{{path}}{{att}}" target="_blank">View Attechment</a>
                      <a *ngIf="att.includes('.pdf')" class="image_attachment" href="{{path}}{{att}}" target="_blank">View Attechment</a>
                    </span>
                  </span>
                  <span  *ngIf="leaves.attechment && !leaves.attechment.length">
                    <a data-lightbox="comment_image" class="image_attachment" href="{{path}}{{leaves.attechment}}">View Attechment</a>
                  </span>

                  <p *ngIf="!leaves.attechment" style="color: blue; font-size: 16px;" >No Attechment</p>
                </td>
                <td>
                  <button type="button" class="btn btn-primary waves-effect waves-light" data-toggle="modal" data-target="#centralModalInfo" (click)="leaveById(leaves._id)">Comment</button>
                </td>
                <td>
                  <button type="button" class="btn btn-primary waves-effect waves-light" data-toggle="modal" data-target="#viewmore" (click)="leaveById(leaves._id)">ViewMore</button>
                </td>
                <td>
                  <strong *ngIf="leaves.status=='pending'" style="color: orange;text-transform: uppercase;">{{leaves.status}}</strong>
                  <strong *ngIf="leaves.status=='approved'" style="color: darkgreen;text-transform: uppercase;">{{leaves.status}}</strong>
                  <strong *ngIf="leaves.status=='rejected'" style="color: red;text-transform: uppercase;">{{leaves.status}}</strong>
                 </td>
                <td *ngIf="leaves.status=='pending'"><a><i class="fa fa-check a_icon" aria-hidden="true" (click)="leaveAccepted(leaves._id)"></i><i class="fa fa-times r_icon" aria-hidden="true" (click)="leaveRejected(leaves._id)"></i></a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container" *ngIf="leavesToDisplay">
  <div class="leaveImage text-center">
    <img src="../assets/leave1.png" style="height: 600px; width: 1110px;">
  </div>
</div>




<!-- Comment Model -->

<div class="modal fade" id="centralModalInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
aria-hidden="true">
<div class="modal-dialog modal-notify modal-info" role="document">
  <!--Content-->
  <div class="modal-content">
    <!--Header-->
    <div class="modal-header">
      <p class="heading lead">Modal Info</p>
<!-- 
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" class="white-text">&times;</span>
        </button> -->
      </div>

      <!--Body-->
      <div class="modal-body">
        <p *ngIf="singleleave">Previous Comment:{{singleleave.comment}}</p>
        <form style="width: 100%;">
          <div class="text-center">
            <i class="fas fa-check fa-4x mb-3 animated rotateIn"></i>
            <div class="form-group" style="text-align: left">
              <label for="exampleFormControlTextarea3"><strong style="font-size: 24px;">Add Comment</strong></label>
              <textarea name="comment" [(ngModel)]="comment" class="form-control" id="exampleFormControlTextarea3" rows="7" ></textarea>
            </div>
          </div>
          <div class="modal-footer justify-content-center">
            <input type="submit" class="btn btn-primary" (click)="submitComment(singleleave._id,comment)">
            <br>
            <a class="btn btn-outline-primary waves-effect" data-dismiss="modal">Cancel</a>
          </div>
        </form>
      </div>

      <!--Footer-->
    </div>
    <!--/.Content-->
  </div>
</div>



<!-- Comment Model -->

<div class="modal fade" id="viewmore" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
aria-hidden="true">
<div class="modal-dialog modal-notify modal-info" role="document">
  <!--Content-->
  <div class="modal-content" *ngIf="singleleave">
    <!--Header-->
    <div class="modal-header">
      <p class="heading lead">Modal Info</p>
    </div>

    <!--Body-->
    <div class="modal-body">
      <div class="container">
        <div class="col-12">
          <p *ngIf="singleleave"><strong>Name:</strong>{{singleleave.name}}</p>
        </div>
        <div class="col-12">
          <p *ngIf="singleleave"><strong>Email:</strong>{{singleleave.email}}</p> 
        </div>
        <div class="row border padding-top-20">
          <div class="col-md-6">
            <p *ngIf="singleleave"><i class="far fa-calendar-alt"></i>StartingDate:{{singleleave.startingDate | date:'mediumDate'}}</p>

          </div>
          <div class="col-md-6">
            <p *ngIf="singleleave"><i class="fas fa-calendar-alt"></i>EndingDate:{{singleleave.endingDate | date:'mediumDate'}}</p> 
          </div>
        </div>
        <div class="col-12">
          <p *ngIf="singleleave"><strong>LeaveDuration:</strong>{{singleleave.leaveDuration}}</p> 
        </div>

        <div class="col-12">
          <p *ngIf="singleleave"><strong>LeaveType:</strong>{{singleleave.typeOfLeave}}</p> 
        </div>
        <div class="col-12">
          <p *ngIf="singleleave"><strong>LeaveReason:</strong>{{singleleave.reasonForLeave}}</p>
        </div>
      </div>
    </div>

    <!--Footer-->
    <a type="button" class="btn btn-outline-primary waves-effect" data-dismiss="modal">Cancel</a>
  </div>
</div>
<!--/.Content-->
</div>
